<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NEXUSMON Control</title>
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="stylesheet" href="/styles.css" />
  <meta name="theme-color" content="#0f172a" />
</head>
<body>
  <header>
    <div class="brand">
      <div class="dot"></div>
      <div>
        <div class="title">NEXUSMON Control</div>
        <div class="subtitle">LAN runtime · PWA</div>
      </div>
    </div>
    <button id="installBtn" class="ghost">Install App</button>
  </header>

  <main>
    <section class="status-row">
      <div class="pill" id="healthPill">Health: pending</div>
      <div class="pill" id="offlinePill">Mode: checking…</div>
      <div class="pill" id="lanPill">LAN URL: …</div>
    </section>

    <section id="holoConsoleSection" class="card holo-panel z2">
      <div class="card-header">
        <div>
          <div class="eyebrow">Neon Command Console</div>
          <div class="card-title">Hologram Prompt Surface</div>
        </div>
        <div class="pill" id="consoleModePill">Mode: interactive</div>
      </div>

      <div id="consoleOutput" class="log console-output">NEXUSMON console online. Type <strong>help</strong>.</div>

      <div class="field">
        <label for="consolePrompt">Prompt</label>
        <input id="consolePrompt" type="text" placeholder="help | health | runs | audit | dispatch <goal> | pair <pin>" autocomplete="off" />
      </div>

      <div id="consolePreview" class="console-preview">Awaiting input…</div>
      <div id="consoleAutocomplete" class="console-autocomplete" aria-live="polite"></div>

      <div class="actions">
        <button class="primary" id="consoleRunBtn">Run Prompt</button>
        <button class="ghost" id="consoleClearBtn">Clear Console</button>
      </div>

      <div class="hint">Token map: <span class="token token-keyword">keyword</span> <span class="token token-flag">--flag</span> <span class="token token-number">123</span> <span class="token token-string">"string"</span></div>
    </section>

    <section id="pairSection" class="card">
      <div class="card-header">
        <div>
          <div class="eyebrow">Pairing</div>
          <div class="card-title">Connect to runtime</div>
        </div>
        <div class="pill" id="pairStatus">Not paired</div>
      </div>
      <div class="field">
        <label for="baseUrl">Base URL</label>
        <input id="baseUrl" type="text" autocomplete="url" />
      </div>
      <div class="field">
        <label for="pinInput">Operator PIN</label>
        <input id="pinInput" type="tel" inputmode="numeric" pattern="[0-9]*" placeholder="••••••" />
      </div>
      <div class="actions">
        <button class="primary" id="pairBtn">Pair Device</button>
        <button class="ghost" id="refreshInfoBtn">Refresh Pairing Info</button>
      </div>
      <div class="hint" id="pairHint">Enter the PIN from the host console. Base URL defaults to this page.</div>
    </section>

    <section id="ignitionSection" class="card" style="display: none;">
      <div class="card-header">
        <div>
          <div class="eyebrow">Ignition</div>
          <div class="card-title">Operator Controls</div>
        </div>
        <div class="pill" id="ignitionStatus">Inactive</div>
      </div>

      <div class="field">
        <label for="operatorCommand">Command</label>
        <select id="operatorCommand">
          <option value="status">Status Check</option>
          <option value="maintenance">Run Maintenance</option>
          <option value="kernel_validate">Validate Kernel</option>
          <option value="execute_artifact">Execute Artifact</option>
        </select>
      </div>

      <div class="field" id="artifactField" style="display: none;">
        <label for="artifactId">Artifact ID</label>
        <input id="artifactId" type="text" placeholder="artifact_id" />
      </div>

      <div class="actions">
        <button class="primary" id="executeCommandBtn">Run Command</button>
        <button class="ghost" id="validateKernelBtn">Validate Kernel</button>
      </div>

      <div class="hint" id="ignitionHint">Operator sovereignty required for ignition controls</div>
    </section>

    <section id="metaSection" class="card" style="display: none;">
      <div class="card-header">
        <div>
          <div class="eyebrow">Meta Sovereignty</div>
          <div class="card-title">THE THING WITHOUT A NAME</div>
        </div>
        <div class="pill" id="metaStatus">Inactive</div>
      </div>

      <div class="field">
        <label for="decisionContext">Decision Context</label>
        <textarea id="decisionContext" rows="3" placeholder='{"domain": "sovereign", "critical": true}'></textarea>
      </div>

      <div class="field">
        <label for="decisionOptions">Decision Options (JSON)</label>
        <textarea id="decisionOptions" rows="4" placeholder='[{"id": "option1", "strategy": "safe"}, {"id": "option2", "strategy": "optimal"}]'></textarea>
      </div>

      <div class="actions">
        <button class="primary" id="makeSovereignDecisionBtn">Make Sovereign Decision</button>
        <button class="ghost" id="applySovereignControlBtn">Apply Sovereign Control</button>
        <button class="ghost" id="checkLatticeStatusBtn">Check Lattice Status</button>
      </div>

      <div class="hint" id="metaHint">Silent arbitration through the lattice flow - meta-coherence governs all layers</div>
    </section>

    <section id="taskMatrixSection" class="card" style="display: none;">
      <div class="card-header">
        <div>
          <div class="eyebrow">NEXT TASK MATRIX</div>
          <div class="card-title">Ignition-Phase Control Surface</div>
        </div>
        <div class="pill" id="taskMatrixStatus">Inactive</div>
      </div>

      <div class="field">
        <label for="taskContext">Task Context</label>
        <textarea id="taskContext" rows="3" placeholder='{"domain": "ignition", "phase": "activation"}'></textarea>
      </div>

      <div class="field">
        <label for="taskOptions">Task Options (JSON)</label>
        <textarea id="taskOptions" rows="4" placeholder='[{"id": "task1", "complexity": "low"}, {"id": "task2", "complexity": "high"}]'></textarea>
      </div>

      <div class="actions">
        <button class="primary" id="processTaskMatrixBtn">Process Task Matrix</button>
        <button class="ghost" id="getIgnitionStatusBtn">Get Ignition Status</button>
      </div>

      <div class="hint" id="taskMatrixHint">
        FILTRATION • GEOMETRY • BOUNDARY • ALIGNMENT • OVERRIDE • UPLIFT • SOVEREIGN ARBITRATION
      </div>
    </section>

    <section id="kernelIgnitionSection" class="card" style="display: none;">
      <div class="card-header">
        <div>
          <div class="eyebrow">KERNEL IGNITION</div>
          <div class="card-title">Phase 3 Runtime Ignition Block</div>
        </div>
        <div class="pill" id="kernelIgnitionStatus">Standby</div>
      </div>

      <div class="field">
        <label for="ignitionStateInput">Ignition State Vector (JSON)</label>
        <textarea id="ignitionStateInput" rows="6" placeholder='Paste ignition state from Task Matrix processing...'></textarea>
      </div>

      <div class="actions">
        <button class="primary" id="executeKernelIgnitionBtn">Execute Kernel Ignition</button>
        <button class="ghost" id="clearIgnitionStateBtn">Clear State</button>
      </div>

      <div class="hint" id="kernelIgnitionHint">
        RECEIVE • FILTER • SHAPE • CONSTRAIN • ALIGN • UPLIFT • OVERRIDE • FINALIZE
      </div>
    </section>

    <section id="commandCenterSection" class="card" style="display: none;">
      <div class="card-header">
        <div>
          <div class="eyebrow">Command Center</div>
          <div class="card-title">Cockpit · Shadow · Evolution · Marketplace</div>
        </div>
        <div class="pill" id="commandCenterStatus">Inactive</div>
      </div>

      <div class="grid command-grid">
        <div>
          <div class="eyebrow">Autonomy Dial</div>
          <div class="actions">
            <input id="autonomyLevelInput" type="number" min="0" max="100" value="35" />
            <button class="primary" id="setAutonomyBtn">Set Autonomy</button>
          </div>
        </div>

        <div>
          <div class="eyebrow">Shadow Mode</div>
          <div class="actions">
            <select id="shadowEnabledSelect">
              <option value="false">Disabled</option>
              <option value="true">Enabled</option>
            </select>
            <input id="shadowLaneInput" type="text" value="mirror" placeholder="lane" />
            <button class="ghost" id="setShadowModeBtn">Apply Shadow Mode</button>
          </div>
        </div>

        <div>
          <div class="eyebrow">Evolution Tree</div>
          <div class="actions">
            <input id="promotePartnerInput" type="text" placeholder="partner_id" />
            <button class="ghost" id="promotePartnerBtn">Promote Partner</button>
          </div>
        </div>

        <div>
          <div class="eyebrow">Marketplace</div>
          <div class="actions">
            <input id="listingTypeInput" type="text" placeholder="mission_type" />
            <input id="listingTitleInput" type="text" placeholder="listing title" />
            <input id="listingRewardInput" type="number" min="0" value="100" />
            <button class="ghost" id="publishListingBtn">Publish Listing</button>
            <button class="ghost" id="loadMarketplaceBtn">Load Listings</button>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="primary" id="refreshCommandCenterBtn">Refresh Command Center</button>
      </div>

      <div id="commandCenterOutput" class="log" style="margin-top: 10px; max-height: 240px;">Command center state will appear here.</div>
    </section>

    <section class="grid">
      <div class="card">
        <div class="card-header">
          <div>
            <div class="eyebrow">Runs</div>
            <div class="card-title">Recent missions</div>
          </div>
          <button class="ghost" id="refreshRunsBtn">Refresh Runs</button>
        </div>
        <ul id="runsList" class="list"></ul>
      </div>

      <div class="card">
        <div class="card-header">
          <div>
            <div class="eyebrow">Run detail</div>
            <div class="card-title" id="detailTitle">Select a run</div>
          </div>
          <div class="pill" id="detailStatus"></div>
        </div>
        <div id="detailBody" class="detail-body">No run selected.</div>
        <div class="actions">
          <button class="primary" id="dispatchBtn">Dispatch Mission</button>
          <button class="ghost" id="refreshDetailBtn">Refresh Run Detail</button>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <div>
            <div class="eyebrow">Audit</div>
            <div class="card-title">Last 50 events</div>
          </div>
          <button class="ghost" id="refreshAuditBtn">Refresh Audit</button>
        </div>
        <div id="auditList" class="log"></div>
      </div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>

