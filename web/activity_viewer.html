<!DOCTYPE html>
<html>
<head>
    <title>SWARMZ Activity Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h1>SWARMZ Activity Viewer</h1>
    <table>
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Event Type</th>
                <th>Tags</th>
            </tr>
        </thead>
        <tbody id="eventTableBody">
            <!-- Events will be dynamically loaded here -->
        </tbody>
    </table>
    <script>
        fetch('/data/activity/events.jsonl')
            .then(response => response.text())
            .then(data => {
                const rows = data.trim().split('\n').slice(-200);
                const tableBody = document.getElementById('eventTableBody');
                rows.forEach(row => {
                    try {
                        const event = JSON.parse(row);
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td>${event.timestamp || ''}</td>
                            <td>${event.event_type || ''}</td>
                            <td>${(event.tags || []).join(', ')}</td>
                        `;
                        tableBody.appendChild(tr);
                    } catch (e) {
                        console.error('Invalid event:', row);
                    }
                });
            });
    </script>
</body>
</html>